{
	"$schema": "http://json-schema.org/draft-07/schema#",
	"type": "object",
	"additionalProperties": false,
	"required": [
		"id",
		"name",
		"urls",
		"platforms",
		"pricing",
		"tags",
		"badges",
		"visibility"
	],

	"properties": {
		"id": {
			"type": "string",
			"pattern": "^[a-z0-9-]+$"
		},

		"name": {
			"type": "string",
			"minLength": 1
		},

		"urls": {
			"type": "object",
			"required": ["website", "purchase"],
			"additionalProperties": false,
			"properties": {
				"website": { "type": "string", "format": "uri" },
				"purchase": { "type": "string", "format": "uri" }
			}
		},

		"platforms": {
			"type": "array",
			"minItems": 1,
			"uniqueItems": true,
			"items": {
				"enum": ["windows", "macos", "ios", "android"]
			}
		},

		"sunc": {
			"type": "object",
			"additionalProperties": {
				"type": "object",
				"required": ["id", "key"],
				"additionalProperties": false,
				"properties": {
					"id": { "type": "string" },
					"key": { "type": "string" }
				}
			}
		},

		"pricing": {
			"type": "object",
			"required": ["type", "price", "currency", "period"],
			"additionalProperties": false,
			"properties": {
				"type": { "enum": ["free", "paid"] },

				"price": {
					"type": ["number", "null"],
					"minimum": 0
				},

				"currency": {
					"type": ["string", "null"],
					"enum": ["USD", "EUR", "GBP", null]
				},

				"period": {
					"type": ["string", "null"],
					"enum": ["lifetime", "monthly", "weekly", null]
				}
			},

			"allOf": [
				{
					"if": {
						"properties": { "type": { "const": "free" } }
					},
					"then": {
						"properties": {
							"price": { "const": null },
							"currency": { "const": null },
							"period": { "const": null }
						}
					}
				},
				{
					"if": {
						"properties": { "type": { "const": "paid" } }
					},
					"then": {
						"properties": {
							"price": { "type": "number" },
							"currency": { "type": "string" },
							"period": { "type": "string" }
						}
					}
				}
			]
		},

		"tags": {
			"type": "array",
			"minItems": 0,
			"uniqueItems": true,
			"items": {
				"type": "string",
				"pattern": "^[a-z0-9-]+$"
			}
		},

		"badges": {
			"type": "array",
			"uniqueItems": true,
			"items": {
				"enum": ["verified", "trusted", "popular"]
			}
		},

		"visibility": {
			"type": "object",
			"required": ["hidden", "promoted"],
			"additionalProperties": false,
			"properties": {
				"hidden": { "type": "boolean" },
				"promoted": { "type": "boolean" }
			}
		}
	}
}
