{
	"$schema": "https://json-schema.org/draft/2020-12/schema",
	"$id": "https://voxlis.net/schemas/prices.json",

	"type": "object",
	"description": "Global pricing table for all exploits",

	"additionalProperties": {
		"type": "object",
		"description": "Pricing information for one exploit",

		"required": ["purchase_url", "platforms"],
		"additionalProperties": false,

		"properties": {
			"purchase_url": {
				"type": "string",
				"format": "uri",
				"description": "Where the user is sent to buy this exploit"
			},

			"platforms": {
				"type": "object",
				"description": "Pricing per platform",

				"additionalProperties": {
					"type": "array",
					"items": {
						"type": "object",
						"required": ["id", "days", "price", "currency"],

						"properties": {
							"id": {
								"type": "string",
								"description": "Unique SKU identifier"
							},

							"days": {
								"type": "integer",
								"description": "Duration in days, -1 = lifetime",
								"minimum": -1
							},

							"price": {
								"type": "number",
								"minimum": 0
							},

							"currency": {
								"type": ["string", "null"],
								"enum": ["USD", "EUR", "GBP", null]
							}
						},

						"allOf": [
							{
								"if": {
									"properties": { "price": { "const": 0 } }
								},
								"then": {
									"properties": {
										"currency": { "const": null }
									}
								}
							}
						]
					}
				}
			}
		}
	}
}
